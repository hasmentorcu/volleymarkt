<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>VolleyMarkt</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>body { font-family: 'Outfit', sans-serif; } .swiper { width: 100%; height: 100%; } .swiper-slide { display: flex; justify-content: center; align-items: center; background: #000; } .swiper-slide img { width: 100%; height: 100%; object-fit: cover; opacity: 0.85; }</style>
</head>
<body class="bg-gray-50 flex flex-col min-h-screen">
    
<nav class="bg-white/95 backdrop-blur-md shadow-md sticky top-0 z-50 font-sans border-t-4 border-orange-500">
    <div class="bg-gray-100 py-2 hidden md:block border-b">
        <div class="container mx-auto text-center"><img src="https://via.placeholder.com/728x90/333/FFF?text=HEADER+REKLAM" class="mx-auto rounded shadow-sm"></div>
    </div>
    <div class="container mx-auto px-4">
        <div class="flex justify-between items-center h-16">
            <a href="/" class="flex items-center gap-2 group">
                <div class="w-11 h-11 bg-gradient-to-br from-orange-500 via-red-500 to-purple-600 rounded-2xl rotate-3 flex items-center justify-center text-white font-extrabold text-2xl shadow-lg group-hover:rotate-12 transition">V</div>
                <div class="flex flex-col">
                    <span class="text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-900 to-orange-600 leading-none">Volley<span class="text-orange-500">Markt</span></span>
                    <span class="text-[10px] text-gray-400 tracking-[0.2em] uppercase font-bold">T√ºrkiye</span>
                </div>
            </a>
            <div class="hidden md:flex items-center space-x-6">
                <a href="/" class="text-gray-700 hover:text-orange-600 font-bold transition">Anasayfa</a>
                <div class="relative group">
                    <button class="flex items-center gap-1 text-gray-700 hover:text-orange-600 font-bold transition">Ligler ‚ñæ</button>
                    <div class="absolute left-0 top-full mt-2 w-48 bg-white rounded-xl shadow-xl border border-gray-100 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition transform group-hover:translate-y-0 translate-y-2 z-50">
                        <a href="/?lig=SULTANLAR" class="block px-4 py-3 hover:bg-orange-50 hover:text-orange-600 rounded-t-xl border-b border-gray-50 font-medium">üèÜ Sultanlar</a>
                        <a href="/?lig=EFELER" class="block px-4 py-3 hover:bg-blue-50 hover:text-blue-600 font-medium rounded-b-xl">üèê Efeler</a>
                    </div>
                </div>
                <a href="/haberler/" class="text-gray-700 hover:text-orange-600 font-bold transition">Haberler</a>
            </div>
            <div class="flex items-center gap-3">
                {% if user.is_authenticated %}
                    <a href="/bildirimler/" class="relative p-2 rounded-full bg-gray-100 hover:text-orange-600 transition">üîî{% if bildirim_sayisi > 0 %}<span class="absolute top-0 right-0 bg-red-600 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full">{{ bildirim_sayisi }}</span>{% endif %}</a>
                    {% if user.menajer %}<a href="/menajer-panel/" class="bg-indigo-900 text-white px-3 py-1.5 rounded-lg text-sm font-bold shadow-md">üíº</a>{% elif user.sporcu %}<a href="/profil-duzenle/" class="bg-orange-500 text-white px-3 py-1.5 rounded-lg text-sm font-bold shadow-md">‚úèÔ∏è</a>{% endif %}
                    <a href="/cikis/" class="text-red-500 font-bold text-sm">√áƒ±kƒ±≈ü</a>
                {% else %}
                    <a href="/giris/" class="text-indigo-900 font-bold">Giri≈ü</a>
                    <a href="/kayit/" class="bg-indigo-900 text-white px-4 py-1.5 rounded-lg font-bold text-sm shadow">Kayƒ±t Ol</a>
                {% endif %}
            </div>
        </div>
    </div>
</nav>


    <main class="flex-grow container mx-auto px-4 py-8">
        {% if messages %}<div class="mb-6">{% for m in messages %}<div class="p-4 rounded-lg bg-green-100 text-green-800 shadow-sm">‚úÖ {{ m }}</div>{% endfor %}</div>{% endif %}

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mb-12">
            <div class="lg:col-span-3 h-[450px] relative rounded-[2rem] shadow-2xl overflow-hidden bg-black">
                {% if mansetler %}
                <div class="swiper mySwiper h-full"><div class="swiper-wrapper">
                    {% for item in mansetler %}
                        {% if item.is_ad %}
                            <div class="swiper-slide relative bg-gray-900"><img src="{{ item.image }}" class="opacity-60"><div class="absolute top-4 right-4 bg-white/20 text-white px-2 py-1 rounded text-xs border">REKLAM</div></div>
                        {% else %}
                            <div class="swiper-slide relative">
                                {% if item.resim %}<img src="{{ item.resim.url }}" alt="{{ item.baslik }}">{% endif %}
                                <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black p-8 text-left">
                                    <span class="bg-orange-600 text-white text-xs font-bold px-3 py-1 rounded-full mb-3 inline-block">{{ item.get_kategori_display }}</span>
                                    <h2 class="text-2xl md:text-4xl font-extrabold text-white mb-3 leading-tight">{{ item.baslik }}</h2>
                                    <a href="/haber/{{ item.id }}/" class="text-white border-b-2 border-orange-500 pb-1 hover:text-orange-400 font-bold">Oku ‚Üí</a>
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div><div class="swiper-button-next text-white"></div><div class="swiper-button-prev text-white"></div><div class="swiper-pagination"></div></div>
                {% else %}<div class="flex items-center justify-center h-full text-white font-bold text-xl">Haber Bekleniyor...</div>{% endif %}
            </div>
            <div class="hidden lg:block lg:col-span-1 h-[450px] bg-gray-200 rounded-[2rem] flex items-center justify-center shadow-xl relative"><img src="https://via.placeholder.com/400x600/222/FFF?text=REKLAM" class="w-full h-full object-cover rounded-[2rem]"><div class="absolute top-4 right-4 bg-black/30 text-white text-[10px] px-2 rounded">REKLAM</div></div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <div class="lg:col-span-3">
                <div class="bg-white p-6 rounded-[2rem] shadow-sm border border-gray-100 mb-8">
                    <form method="GET" class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        {% if secili_lig %}<input type="hidden" name="lig" value="{{ secili_lig }}">{% endif %}
                        <input type="text" name="isim" value="{{ secili_isim|default:'' }}" placeholder="ƒ∞sim..." class="border p-3 rounded-xl w-full md:col-span-4 bg-gray-50">
                        <select name="kulup" class="border p-3 rounded-xl w-full bg-gray-50"><option value="">Kul√ºp</option>{% for k in kulupler %}<option value="{{ k.id }}" {% if k.id == secili_kulup %}selected{% endif %}>{{ k.isim }}</option>{% endfor %}</select>
                        <select name="mevki" class="border p-3 rounded-xl w-full bg-gray-50"><option value="">Mevki</option>{% for k,v in mevkiler %}<option value="{{ k }}" {% if k == secili_mevki %}selected{% endif %}>{{ v }}</option>{% endfor %}</select>
                        <div class="flex gap-2"><input type="number" name="min_boy" placeholder="Min" class="border p-3 rounded-xl w-1/2 bg-gray-50"><input type="number" name="max_boy" placeholder="Max" class="border p-3 rounded-xl w-1/2 bg-gray-50"></div>
                        <button class="bg-indigo-900 text-white font-bold rounded-xl p-3 hover:bg-indigo-800">Filtrele</button>
                    </form>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-3 gap-6">
                    {% for sporcu in sporcular %}
                        {% if forloop.counter == 5 %}<div class="col-span-2 md:col-span-3 bg-gray-100 rounded-xl flex items-center justify-center h-32 border-2 border-dashed border-gray-300 text-gray-400 font-bold">Lƒ∞STE ARASI REKLAM</div>{% endif %}
                        <a href="/sporcu/{{ sporcu.id }}/" class="bg-white rounded-3xl shadow hover:shadow-2xl transition group overflow-hidden border-2 border-transparent hover:border-orange-200">
                            <div class="h-60 bg-gray-200 relative">
                                {% if sporcu.profil_fotografi %}<img src="{{ sporcu.profil_fotografi.url }}" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">{% endif %}
                                <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-indigo-900 p-4 pt-10">
                                    <h3 class="text-white font-bold text-lg">{{ sporcu.isim }}</h3>
                                    <p class="text-orange-300 text-xs font-bold">{{ sporcu.kulup.isim }} ({{ sporcu.kulup.get_lig_display }})</p>
                                </div>
                            </div>
                            <div class="p-4 flex justify-between items-center text-sm">
                                <span class="bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full text-xs font-bold">{{ sporcu.get_mevki_display }}</span>
                                <span class="font-bold text-indigo-900">{{ sporcu.boy }} cm</span>
                            </div>
                        </a>
                    {% endfor %}
                </div>
            </div>

            <div class="space-y-8">
                <div class="bg-white rounded-[2rem] shadow-lg overflow-hidden border border-indigo-50">
                    <div class="flex text-center font-bold cursor-pointer">
                        <div class="w-1/2 p-4 bg-indigo-900 text-white" onclick="document.getElementById('tab-sultanlar').classList.remove('hidden');document.getElementById('tab-efeler').classList.add('hidden');">üèÜ Sultanlar</div>
                        <div class="w-1/2 p-4 bg-gray-100 text-gray-600 hover:bg-gray-200" onclick="document.getElementById('tab-efeler').classList.remove('hidden');document.getElementById('tab-sultanlar').classList.add('hidden');">üèê Efeler</div>
                    </div>
                    <div id="tab-sultanlar"><table class="w-full text-sm">{% for s in puan_sultanlar %}<tr class="border-b hover:bg-indigo-50"><td class="p-4 font-medium">{{ forloop.counter }}. {{ s.kulup.isim }}</td><td class="p-4 font-bold text-right">{{ s.puan|floatformat:0 }}</td></tr>{% endfor %}</table></div>
                    <div id="tab-efeler" class="hidden"><table class="w-full text-sm">{% for s in puan_efeler %}<tr class="border-b hover:bg-blue-50"><td class="p-4 font-medium">{{ forloop.counter }}. {{ s.kulup.isim }}</td><td class="p-4 font-bold text-right">{{ s.puan|floatformat:0 }}</td></tr>{% endfor %}</table></div>
                </div>
                <div class="bg-gray-100 h-64 rounded-xl flex items-center justify-center border border-gray-300 text-gray-400 font-bold">KARE REKLAM</div>
            </div>
        </div>
        
        <div class="mt-24 border-t pt-12">
            <h2 class="text-3xl font-extrabold text-center text-indigo-900 mb-12">ƒ∞statistik Merkezi</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="bg-white p-6 rounded-3xl shadow-lg"><canvas id="mevkiChart"></canvas></div>
                <div class="bg-white p-6 rounded-3xl shadow-lg"><canvas id="boyChart"></canvas></div>
                <div class="bg-white p-6 rounded-3xl shadow-lg"><canvas id="degerChart"></canvas></div>
            </div>
        </div>
    </main>

    
<footer class="bg-gradient-to-b from-gray-900 to-indigo-950 text-gray-300 mt-24 border-t-4 border-orange-500">
    <div class="container mx-auto px-4 py-16 text-center">
        <h2 class="text-3xl font-extrabold text-white mb-4">Volley<span class="text-orange-500">Markt</span></h2>
        <p class="text-sm opacity-80">&copy; 2025 T√ºm Haklarƒ± Saklƒ±dƒ±r.</p>
    </div>
</footer>

    
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>new Swiper(".mySwiper", { autoplay: { delay: 4000 }, pagination: { clickable: true } });</script>
    <script>
        const mevkiData = { labels: { mevki_labels|safe }, datasets: [{ data: { mevki_counts|safe }, backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF'] }] };
        const boyData = { labels: { uzun_labels|safe }, datasets: [{ label: 'Boy', data: { uzun_values|safe }, backgroundColor: '#36A2EB' }] };
        const degerData = { labels: { deger_labels|safe }, datasets: [{ label: 'Deƒüer', data: { deger_values|safe }, backgroundColor: '#4BC0C0' }] };
        new Chart(document.getElementById('mevkiChart'), { type: 'doughnut', data: mevkiData });
        new Chart(document.getElementById('boyChart'), { type: 'bar', data: boyData, options: { indexAxis: 'y' } });
        new Chart(document.getElementById('degerChart'), { type: 'bar', data: degerData });
    </script>
</body>
</html>
